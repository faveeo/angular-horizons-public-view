!function(t){t.filter("default",function(){return function(t,e){return t&&""!==t?t:e}}),t.filter("cut",function(){return function(t,e,n,a){if(!t)return"";if(n=parseInt(n,10),!n)return t;if(t.length<=n)return t;if(t=t.substr(0,n),e){var r=t.lastIndexOf(" ");-1!=r&&(t=t.substr(0,r))}return t+(a||" â€¦")}}),t.filter("twitterBigger",function(){return function(t){return t.replace("_normal","_bigger")}}),t.filter("twitterFull",function(){return function(t){return t.replace("_normal","").replace("_bigger","")}}),t.filter("cleanHostName",function(){return function(t){return t=t.replace(/^https?:\/\//,""),"/"==t.substr(-1)&&(t=t.substr(0,t.length-1)),t}}),t.filter("timeSince",function(t){return function(e){"object"!=typeof e&&(e="string"==typeof e?t.parse(e):new Date(e));var n,a=Math.floor((new Date-e)/1e3),r=Math.floor(a/31536e3);return r>=1?n="year":(r=Math.floor(a/2592e3),r>=1?n="month":(r=Math.floor(a/86400),r>=1?n="day":(r=Math.floor(a/3600),r>=1?n="hour":(r=Math.floor(a/60),r>=1?n="minute":(r=a,n="second"))))),(r>1||0===r)&&(n+="s"),r+" "+n}}),t.filter("nl2br",function(t){return function(e,n){n=n||!0;var a=n?"<br />":"<br>";return e=(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+a+"$2"),t.trustAsHtml(e)}}),t.filter("numberFormat",function(){return function(t){if(t>0){var e=Math.abs(t);e>=Math.pow(10,12)?t=(t/Math.pow(10,12)).toFixed(1)+"t":e<Math.pow(10,12)&&e>=Math.pow(10,9)?t=(t/Math.pow(10,9)).toFixed(1)+"b":e<Math.pow(10,9)&&e>=Math.pow(10,6)?t=(t/Math.pow(10,6)).toFixed(1)+"m":e<Math.pow(10,6)&&e>=Math.pow(10,3)&&(t=(t/Math.pow(10,3)).toFixed(1)+"k")}return t}}),t.filter("to_trusted_html",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}])}(angular.module("angularHorizonsPublicView.filters")),function(t){t.run(function(t,e){t.setDefaultHeaders({"Content-Type":"application/json"}),t.setBaseUrl(e.faveeoApiUrl)}),t.factory("FaveeoApiHorizonsContent",["$q","Restangular","HttpErrorHandler",function(t,e,n){var a={};return a.path="twitterinfluencers2/",a.restangularAPI=e.all(a.path),a.getContent=function(t,e,r,i,s,l,o){var c={page:r,pagesize:i},u=parseInt(e);u>0&&(c.from="d"+u),s===!0&&(c.cb=(new Date).getTime()*(Math.random()+1)),a.restangularAPI.withHttpConfig({timeout:a.getContentDeferred.promise}).customGET(t+"/content",c).then(l,n.useDefaultCallbackIfUndefined(o))},a.getContentDeferred=t.defer(),a.abortGetContent=function(){a.getContentDeferred.resolve(),a.getContentDeferred=t.defer()},a.getArticleForUrl=function(t){var e={url:t};return a.restangularAPI.withHttpConfig({timeout:a.getArticleForUrlDeferred.promise}).customGET("articleforurl",e)},a.getArticleForUrlDeferred=t.defer(),a.abortGetArticleForUrl=function(){a.getArticleForUrlDeferred.resolve(),a.getArticleForUrlDeferred=t.defer()},a}])}(angular.module("angularHorizonsPublicView.faveeoApi")),angular.module("angularHorizonsPublicView.directives").directive("article",function(){return{restrict:"E",scope:{baseline:"=",showimages:"="},templateUrl:"horizons-common/directives/article/article.tpl.html",replace:!0,controller:["$scope","FaveeoApiTwitterInfluencers",function(t,e){function n(t){return a.automaticsummary=t.excerpt,a.imageurl=t.imageurl,a.title=t.title,angular.isDefined(t.pubdate)&&(a.pubdate=t.pubdate),a}t.article={twitterReferences:t.baseline.twitterReferences,highlights:t.baseline.highlights};var a=t.baseline.document;angular.isUndefined(a.extractorType)||"faveeo"===a.extractorType?e.getArticleForUrl(a.url).then(function(e){t.article.document=angular.isDefined(e)?n(e):a},function(){t.article.document=a}):t.article.document=a}]}}),angular.module("angularHorizonsPublicView.directives").directive("classicarticle",function(){return{restrict:"E",scope:{entry:"=",trefs:"=",highlights:"=",showimages:"=",onclose:"&"},data:"",templateUrl:"angularHorizonsPublicView/directives/classicArticle/classicArticle.tpl.html",replace:!0,controller:["$scope","$rootScope","$translate","$timeout","timeSinceTranslatedFilter","AppEvents",function(t,e,n,a,r,i){function s(){"undefined"!=typeof addthis?t.$evalAsync(function(){t.updateAddThis()}):a(s,500)}t.assetspath=angular.isDefined(e.assetsPath)?e.assetsPath.replace(/\/$/,""):"assets",t.timeSinceTranslated="",n.onReady(function(){var e=r(t.entry.pubdate);t.timeSinceTranslated=n.instant("FILTERS.TIME_SINCE_TRANSLATED."+e.type,{count:e.count})}),t.addThisClass="addthis"+(new Date).getTime(),t.showShareButtons=!1,t.showShare=!1,t.clickEvent=function(){e.$broadcast(i.DOCUMENT_CLICK_EVENT,t.entry.url)},t.saveEvent=function(){e.$broadcast(i.DOCUMENT_SAVE_EVENT,t.entry.url)},t.hideEvent=function(){e.$broadcast(i.DOCUMENT_HIDE_EVENT,t.entry.url)},t.hasArticle=function(){return angular.isDefined(t.entry)},t.updateAddThis=function(){addthis.toolbox("."+t.addThisClass,{},{url:t.entry.url,title:t.entry.title,description:t.entry.automaticsummary})},s()}]}}),function(t){t.directive("simpleview",function(){return{restrict:"EA",templateUrl:"widgets/simpleView.tpl.html",scope:{config:"="},replace:!1,controller:["$scope","$rootScope","FaveeoApi",function(t,e,n){t.lastArticleLoaded=!1,t.loading=!1,t.articles=[],t.page=1,t.dateRange=7,t.pageSize=10,t.socialMagazineId="496eeb1d-f689-4a0b-a693-a7ea80b6816d",t.init=function(){t.articles=[],t.page=1,t.getContent()},t.getContent=function(){n.abortGetArticleForUrl(),n.abortGetContent(),t.loading=!0,n.getContent(t.socialMagazineId,t.dateRange,t.page,t.pagesize,!1,function(e){t.lastArticleLoaded=!0;try{if(angular.isDefined(e.content)&&e.content.length>0){if(!t.config.showImages)for(var n in e.content)e.content[n].document.imageurl=null;t.articles.push.apply(t.articles,e.content),t.lastArticleLoaded=!1}t.loading=!1}catch(a){t.loading=!1,console.log("Error parsing articles:\n\n"+a)}},function(e){t.lastArticleLoaded=!0,e.config.timeout||(console.log("Error loading articles:\n\n"+e),t.loading=!1)})},t.getNextPage=function(){t.page++,t.getContent()},t.init()}]}})}(angular.module("angularHorizonsPublicView.simpleView",["angularHorizonsPublicView.directives","angularHorizonsPublicView.filters","angularHorizonsPublicView.factories","angularHorizonsPublicView.faveeoApi","ngAnimate"])),angular.module("angularHorizonsPublicView.directives").run(["$templateCache",function(t){t.put("angular-horizons-public-view/directives/article/article.tpl.html",'<div>\n  <classicarticle ng-if="article.document" entry="article.document" showimages="showimages" trefs="article.twitterReferences" highlights="article.highlights" shareassetspath="{{assetspath}}"></classicarticle>\n</div>\n'),t.put("angular-horizons-public-view/directives/classicArticle/classicArticle.tpl.html",'<div class="article" ng-mouseover="isHover = true" ng-mouseleave="showShareButtons = false; isHover = false">\n    <div ng-show="hasArticle()">\n        <h6 class="mg-md clearfix" ng-dblclick="showHighlight=!showHighlight" ng-show="entry.pubdate">\n            <span class="float-left">{{timeSinceTranslated}}</span>\n        </h6>\n\n        <div class="boxmask" ng-if="showimages">\n            <a href="{{entry.url}}" target="_blank">\n                <img ng-src="{{entry.imageurl}}"\n                     class="img-responsive" article-image>\n            </a>\n        </div>\n        <div>\n            <h5 class="mg-md">\n                <a href="{{entry.url}}" target="_blank"\n                   >\n                    {{entry.title | default:\'Click here to view article\'}}\n                </a>\n            </h5>\n\n            <p class="summary">\n                <a href="{{entry.url}}" target="_blank"\n                   ng-bind-html="entry.automaticsummary | cut:true:535:\' ...\' | nl2br">\n                </a>\n            </p>\n            <dl class="highlights" ng-repeat="hlt in highlights" ng-if="showHighlight">\n                <dt>In {{hlt.field}}:</dt>\n                <dd ng-repeat="fragment in hlt.fragments" ng-bind-html="fragment|to_trusted_html"></dd>\n            </dl>\n            <h6 class="mg-md" ng-if="entry.urlFQDN">\n                <a href="{{entry.url}}" target="_blank">\n                    {{entry.urlFQDN | cleanHostName}}\n                </a>\n            </h6>\n        </div>\n    </diV>\n    <span class="twitter-img" ng-repeat="tr in trefs">\n        <a href="{{tr.tweetURL}}" target="_blank">\n            <img class="img-thumbnail twitteruser-img" ng-src="{{tr.authorImageURL}}"\n                 alt="{{tr.authorName}}" fallback-twitter-src-img="{{tr.authorName}}"/>\n        </a>\n    </span>\n    <hr>\n    <div class="share-container text-center" ng-show="hasArticle()">\n        <div class="action-buttons text-center">\n            <a href="" ng-click="showShareButtons = true" ng-show="isHover">\n                <i class="fa fa-share-alt"></i> Share Article\n            </a>\n        </div>\n        <!-- AddThis Button BEGIN -->\n        <div data-addthis-toolbox data-url="{{entry.url}}" data-title="{{entry.title}}"\n             data-description="{{entry.automaticsummary}}"\n             class="addthis_toolbox addthis_default_style {{addThisClass}}" ng-show="showShareButtons">\n            <a class="addthis_button_twitter"><img ng-src="{{assetspath+\'/shareIcons/twitter.png\'}}"></a>\n            <a class="addthis_button_facebook"><img ng-src="{{assetspath+\'/shareIcons/facebook.png\'}}"></a>\n            <a class="addthis_button_linkedin"><img ng-src="{{assetspath+\'/shareIcons/linkedin.png\'}}"></a>\n            <a class="addthis_button_google_plusone_share"><img ng-src="{{assetspath+\'/shareIcons/googleplus.png\'}}"></a>\n            <a class="addthis_button_evernote"><img ng-src="{{assetspath+\'/shareIcons/evernote.png\'}}"></a>\n            <a class="addthis_button_mailto"><img ng-src="{{assetspath+\'/shareIcons/mail.png\'}}"></a>\n            <a class="addthis_button_pocket"><img ng-src="{{assetspath+\'/shareIcons/pocket.png\'}}"></a>\n            <a class="addthis_button_buffer"><img ng-src="{{assetspath+\'/shareIcons/buffer.png\'}}"></a>\n        </div>\n    </div>\n</div>\n'),t.put("angular-horizons-public-view/directives/simpleView/simpleView.tpl.html",'<div class="simpleview-container" ng-cloak ng-show="socialMagazineId!=\'\'">\n    <div translate-cloak>\n        <section class="article-container">\n            <div class="row">\n                <div ng-repeat="article in articles">\n                    <div ng-if="$index % 2 == 0" class="clearfix visible-md-block"></div>\n                    <div ng-if="$index % 3 == 0" class="clearfix visible-lg-block"></div>\n                    <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12 text-left">\n                        <article baseline="article" showimages="config.showImages"></article>\n                    </div>\n                </div>\n            </div>\n            <div class="row text-center show-more" ng-show="!lastArticleLoaded && !loading">\n                <button class="btn btn-default show-more-button" ng-click="getNextPage()" translate>\n                    FULL_VIEW.SHOW_MORE\n                </button>\n            </div>\n        </section>\n\n        <div class="container">\n            <div ng-show="articles.length == 0 && !loading">\n                <div class="row">\n                    <div class="col-xs-12 text-center ">\n                        <h3 class="text-warning" translate>FULL_VIEW.NO_ARTICLE_FOUND</h3>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="loading row" ng-show="loading">\n            <div class="col-xs-12 text-center">\n                <i class="fa fa-refresh fa-spin fa-5x"></i>\n            </div>\n        </div>\n\n        <script src="//s7.addthis.com/js/300/addthis_widget.js"></script>\n    </div>\n</div>\n')}]);